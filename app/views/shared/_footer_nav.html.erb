<%# スマホ下部固定のフッターナビ（md以上は非表示） %>
<nav class="fixed inset-x-0 bottom-0 z-50 h-14 border-t bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 md:hidden"
     role="navigation" aria-label="フッターナビ">
  <ul class="grid grid-cols-4 h-14">
    <% items = [
      { label: "ホーム",         href: (defined?(root_path) ? root_path : "#"),
        active: (defined?(root_path) ? (current_page?(root_path) rescue false) : false),
        icon: "home" },

      { label: "タスク",         href: (defined?(logs_path) ? logs_path : "#"),
        active: (controller_name == "logs"),
        icon: "clipboard-document-list" },

      { label: "アクティビティ", href: (defined?(timeline_index_path) ? timeline_index_path : "#"),
        active: (controller_name == "timeline"),
        icon: "bell" },

      { label: "その他",         href: (defined?(more_path) ? more_path : "#"),
        active: (request.path.start_with?("/more") rescue false),
        icon: "ellipsis-horizontal" }
    ] %>

    <% items.each do |it| %>
      <% base     = "relative flex flex-col items-center justify-center gap-0.5" %>
      <% link_cls = it[:active] ? "text-slate-900 font-medium" : "text-slate-500 hover:text-slate-900" %>

      <li>
        <%= link_to it[:href], class: "#{base} #{link_cls} min-h-[56px] pt-0.5", "aria-current": (it[:active] ? "page" : nil) do %>
          <%= icon it[:icon],
                   variant: (it[:active] ? :solid : :outline),
                   size: "w-6 h-6",
                   "aria-hidden": "true" %>
          <span class="text-[11px] leading-none"><%= it[:label] %></span>

          <%# アクティブ下線 %>
          <% if it[:active] %>
            <span class="absolute -bottom-px h-0.5 w-8 bg-slate-900 rounded" aria-hidden="true"></span>
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ul>
</nav>
