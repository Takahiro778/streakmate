<%= turbo_frame_tag dom_id(goal, :favorite) do %>
  <div class="flex items-center gap-2">
    <% if user_signed_in? %>
      <% if goal.favorited_by?(current_user) %>
        <%= button_to "お気に入り解除", goal_favorite_path(goal),
              method: :delete,
              form: { data: { turbo_submits_with: "処理中..." } },
              class: "px-3 py-1 rounded-2xl border text-sm" %>
      <% else %>
        <%= button_to "お気に入り", goal_favorite_path(goal),
              method: :post,
              form: { data: { turbo_submits_with: "処理中..." } },
              class: "px-3 py-1 rounded-2xl bg-amber-500 text-white text-sm hover:opacity-90" %>
      <% end %>
    <% else %>
      <button disabled class="px-3 py-1 rounded-2xl border text-sm opacity-50 cursor-not-allowed">お気に入り</button>
    <% end %>

    <span class="text-sm"><%= goal.favorites_count %></span>
  </div>
<% end %>
