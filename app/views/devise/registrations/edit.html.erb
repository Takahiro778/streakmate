<div class="max-w-sm mx-auto p-4 space-y-6">
  <h1 class="text-xl font-bold">Account settings</h1>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name),
               html: { method: :put, class: "space-y-4" }) do |f| %>

    <div class="card space-y-3">
      <div>
        <%= f.label :nickname, "Nickname", class: "text-sm font-medium text-gray-900" %>
        <%= f.text_field :nickname, autofocus: true, autocomplete: "nickname", class: "input mt-1" %>
      </div>

      <div>
        <%= f.label :email, "Email", class: "text-sm font-medium text-gray-900" %>
        <%= f.email_field :email, autocomplete: "email", class: "input mt-1" %>
      </div>

      <hr class="border-gray-200">

      <div>
        <%= f.label :password, "New password", class: "text-sm font-medium text-gray-900" %>
        <p class="text-xs text-gray-500 mt-0.5">Leave blank if you don’t want to change it</p>
        <% if @minimum_password_length %>
          <p class="text-xs text-gray-500 mt-0.5"><%= @minimum_password_length %> characters minimum</p>
        <% end %>
        <%= f.password_field :password, autocomplete: "new-password", class: "input mt-1" %>
      </div>

      <div>
        <%= f.label :password_confirmation, "Password confirmation", class: "text-sm font-medium text-gray-900" %>
        <%= f.password_field :password_confirmation, autocomplete: "new-password", class: "input mt-1" %>
      </div>

      <div>
        <%= f.label :current_password, "Current password", class: "text-sm font-medium text-gray-900" %>
        <p class="text-xs text-gray-500 mt-0.5">We need your current password to confirm your changes</p>
        <%= f.password_field :current_password, autocomplete: "current-password", class: "input mt-1" %>
      </div>
    </div>

    <!-- 画面下に張り付く更新ボタン -->
    <div class="sticky bottom-[72px] md:bottom-4 inset-x-0 z-40
                bg-white/95 backdrop-blur border-t supports-[backdrop-filter]:bg-white/60 py-3">
      <div class="max-w-sm mx-auto px-4 flex gap-2">
        <%= f.submit "Update", class: "btn-primary w-full min-h-[44px]" %>
      </div>
    </div>
  <% end %>

  <!-- 退会セクション（オプション） -->
  <div class="card space-y-3">
    <p class="font-medium">Cancel my account</p>
    <p class="text-sm text-gray-600">This action is irreversible.</p>
    <%= button_to "Delete account",
          registration_path(resource_name),
          data: { turbo_confirm: "本当に削除しますか？" },
          method: :delete,
          class: "btn-secondary text-red-700 border-red-300 hover:bg-red-50" %>
  </div>

  <div class="text-center">
    <%= link_to "Back", :back, class: "underline text-sm text-gray-600" %>
  </div>
</div>
