<%= turbo_frame_tag dom_id(log, :cheer) do %>
  <div class="flex items-center gap-2">
    <% if user_signed_in? && current_user != log.user %>
      <% if log.cheered_by?(current_user) %>
        <%= button_to "応援取り消し", log_cheer_path(log),
                      method: :delete,
                      # 送信( submit )イベントをフックしてスピナー表示＋デバウンス
                      form: { data: { controller: "click-guard", action: "submit->click-guard#submit" } },
                      class: "px-3 py-1 rounded-2xl border text-sm" %>
      <% else %>
        <%= button_to "応援する", log_cheer_path(log),
                      method: :post,
                      form: { data: { controller: "click-guard", action: "submit->click-guard#submit" } },
                      class: "px-3 py-1 rounded-2xl bg-blue-600 text-white text-sm hover:opacity-90" %>
      <% end %>
    <% else %>
      <button disabled class="px-3 py-1 rounded-2xl border text-sm opacity-50 cursor-not-allowed">
        応援
      </button>
    <% end %>

    <span class="text-sm"><%= log.cheers_count %></span>
  </div>
<% end %>
