<%= turbo_frame_tag dom_id(comment) do %>
  <div class="text-sm p-2 border rounded-md bg-gray-50 flex items-start justify-between gap-3">
    <div class="flex items-start gap-3">
      <%= avatar_for(comment.user, size: 48, class: "rounded-full ring-1 ring-gray-200") %>
      <div class="whitespace-pre-wrap break-words">
        <span class="font-semibold"><%= comment.user.nickname.presence || comment.user.email %></span>：
        <%= h(comment.body) %>
        <div class="text-xs text-gray-400 mt-0.5"><%= l(comment.created_at, format: :short) %></div>
      </div>
    </div>

    <div class="shrink-0 flex items-center gap-2 text-xs">
      <% if current_user&.id == comment.user_id %>
        <%= link_to "編集", edit_log_comment_path(comment.log, comment),
            data: { turbo_frame: dom_id(comment) },
            class: "underline text-gray-500" %>
      <% end %>

      <% if current_user && (current_user.id == comment.user_id || current_user.id == comment.log.user_id) %>
        <%= button_to "削除", log_comment_path(comment.log, comment),
            method: :delete,
            form: { data: { turbo_confirm: "削除しますか？" } },
            class: "text-red-600" %>
      <% end %>
    </div>
  </div>
<% end %>
