<div class="max-w-sm mx-auto p-4 space-y-6">
  <h1 class="text-xl font-bold">Settings</h1>

  <%= form_with url: setting_path, method: :patch, class: "space-y-4" do |f| %>
    <!-- 就寝通知ブロック -->
    <section class="card space-y-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="font-medium">就寝通知</p>
          <p class="text-xs text-gray-500">毎日の就寝時刻にリマインド</p>
        </div>

        <label class="inline-flex cursor-pointer items-center">
          <%= hidden_field_tag "setting[bedtime_enabled]", 0 %>
          <%= check_box_tag "setting[bedtime_enabled]", 1, @setting&.bedtime_enabled, class: "sr-only peer" %>
          <span class="relative h-6 w-10 rounded-full bg-gray-300 transition-all peer-checked:bg-indigo-600">
            <span class="absolute left-1 top-1 h-4 w-4 rounded-full bg-white transition-all peer-checked:left-5"></span>
          </span>
        </label>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-900">就寝時刻</label>
        <%= time_field_tag "setting[bedtime_time]",
              (@setting&.bedtime_time&.strftime("%H:%M") || "23:00"),
              class: "input mt-1" %>
        <p class="mt-1 text-xs text-gray-500">24時間表記（例: 23:00）</p>
      </div>

      <p class="text-xs text-gray-500">
        タイムゾーン：
        <%= @setting&.time_zone.presence || Time.zone.tzinfo.name %>
      </p>
    </section>

    <!-- 画面下に張り付く保存ボタン -->
    <div class="sticky bottom-[72px] md:bottom-4 inset-x-0 z-40
                bg-white/95 backdrop-blur border-t supports-[backdrop-filter]:bg-white/60 py-3">
      <div class="max-w-sm mx-auto px-4">
        <%= f.submit "保存", class: "btn-primary w-full min-h-[44px]" %>
      </div>
    </div>
  <% end %>
</div>
